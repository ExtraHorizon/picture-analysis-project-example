# Picture Analysis Project Example

# Introduction
This project is an example of how Extra Horizon can be used to create a picture analysis project.
It contains the bare minimal code required to show case what's needed to get started.

# Project Overview
- A mobile device takes a picture.
- The picture is sent to the File Service.
- The file reference is sent to the Data Service.
- The Data Service triggers a task to process the picture.
- The task uses a template to create a report.
- The task uploads the report to the File Service.
- The task updates the Data Service with the report reference.
- A web app displays the measurements and links to the pictures and reports.

# Instructions

## Prerequisites
1. [Install the Extra Horizon CLI](https://docs.extrahorizon.com/cli/readme/installation)
2. [Login to the CLI](https://docs.extrahorizon.com/cli/readme/login)
3. Validate you're authenticated correctly
    ```bash
    exh whoami
    ```

## Setup
4. Install dependencies for the task
    ```bash
    cd tasks/analyze-picture
    npm install
    cd ../..
    ```
5. Sync the project using the CLI
    ```bash
    exh sync
    # It should say something like:
    # ⚙️ Syncing schemas ...
    # ⚙️ Syncing templates ...
    # ⚙️ Syncing tasks ...
    ```


## Start the mobile app
6. Follow the instructions in the [mobile-application](mobile-application/README.md) folder

## Run the web app
7. Install the dependencies for the web app
    ```bash
    cd demo-web-app
    npm install
    ```
8. Create a `.env` file with your credentials
    ```bash
    cp .env.example .env
    # Edit the .env file
    # Credentials are either provided to you or:
    # - Generate credentials yourself using the Control Center
    # - Find the credentials generated by the CLI by opening the `.exh/credentials` file in your home directory
    ```
9. Run the web app
    ```bash
    npm start
    ```
10. Open your browser and go to http://localhost:3000 to view the measurements

# Folder Structure
- `mobile-application/`
  - A mobile application that takes a picture and sends it to ExH
- `demo-web-app/`
  - A web app that displays the data from ExH
- `mobile-simulator/`
  - A node.js script simulating a device sending data to ExH
- 3 folders containing the configuration for ExH, used by the CLI to configure a ExH cluster
  - `schemas/picture-measurement.json`
    - Data service schema describing the Picture Measurement schema
  - `tasks/analyze-picture/`
    - A function "analyzing" the picture and creating a report
  - `templates/picture-report/`
    - A template for the report

